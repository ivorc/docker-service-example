import json
import os
import datetime
import time
import xmltodict as xmltodict
import urllib.request
import re


def main():
    if not os.path.exists("data.json"):
        download_files()
        convert_xml_to_json()


def download_files():
    urls = [
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS297en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS109en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS701en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS110en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS227en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS111en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS228en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS155en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS027en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS112en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS702en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS113en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS114en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS156en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS028en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS157en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS115en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS029en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS298en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS229en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS116en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS158en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS030en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS299en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS230en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS869en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS117en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS300en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS159en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS231en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS232en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS888en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS118en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS032en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS233en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS893en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS160en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS301en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS161en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS302en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS120en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS162en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS894en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS122en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS163en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS303en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS164en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS062en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS259en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS260en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS209en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS063en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS219en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS261en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS210en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS064en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS235en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS236en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS871en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS070en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS220en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS237en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS066en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS262en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS211en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS067en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS212en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS238en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS878en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS221en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS263en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS214en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS264en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS068en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS222en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS215en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS239en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS899en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS216en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS266en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS879en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS069en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS223en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS224en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS240en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS241en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS225en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS501en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS502en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS503en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS504en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS505en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS506en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS508en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS507en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS509en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS510en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS511en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS512en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS513en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS514en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS515en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS516en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS517en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS518en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS519en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS520en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS521en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS522en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS523en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS524en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS525en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS526en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS527en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS528en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS529en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS530en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS531en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS532en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS533en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS874en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS706en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS410en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS859en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS861en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS416en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS417en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS707en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS860en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS648en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS427en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS862en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS429en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS055en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS056en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS897en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS898en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS403en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS196en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS405en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS057en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS703en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS704en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS197en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS058en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS059en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS198en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS889en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS199en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS412en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS200en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS414en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS415en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS418en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS201en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS202en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS203en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS419en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS204en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS422en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS424en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS060en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS205en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS421en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS428en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS430en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS431en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS890en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS206en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS434en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS435en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS207en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS323en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS324en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS179en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS021en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS131en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS882en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS875en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS180en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS268en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS325en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS022en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS326en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS181en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS182en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS132en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS102en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS133en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS305en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS306en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS134en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS135en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS184en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS307en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS136en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS103en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS137en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS327en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS867en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS105en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS185en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS896en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS328en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS870en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS308en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS138en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS269en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS876en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS884en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS309en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS106en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS310en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS140en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS187en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS188en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS885en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS024en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS270en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS877en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS311en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS312en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS189en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS313en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS142en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS190en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS191en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS192en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS271en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS314en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS107en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS883en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS272en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS143en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS886en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS315en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS887en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS329en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS025en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS857en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS872en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS855en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS124en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS084en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS705en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS125en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS072en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS085en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS073en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS126en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS127en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS336en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS281en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS074en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS075en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS086en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS858en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS891en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS873en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS088en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS282en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS856en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS077en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS283en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS128en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS881en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS284en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS078en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS129en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS892en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS080en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS081en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS089en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS285en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS090en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS709en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS402en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS145en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS287en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS407en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS409en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS288en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS895en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS289en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS148en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS290en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS317en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS318en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS149en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS319en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS423en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS708en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS426en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS291en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS292en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS293en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS880en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS320en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS295en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS900en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS433en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS321en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS436en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS151en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS152en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS153en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS401en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS404en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS406en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS250en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS408en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS863en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS251en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS252en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS866en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS411en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS413en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS865en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS864en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS253en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS420en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS254en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS255en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS256en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS425en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS432en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS868en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS801en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS802en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS803en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS807en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS805en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS813en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS816en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS809en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS804en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS811en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS814en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS760en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS761en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS762en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS763en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS768en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS791en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS770en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS772en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS764en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS771en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS781en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS787en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS773en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS774en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS775en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS776en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS777en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS778en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS783en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS784en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS765en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS779en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS785en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS786en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS788en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS767en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS789en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS766en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS780en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS790en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS769en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS782en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS551en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS552en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS553en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS555en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS556en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS558en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS557en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS550en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS559en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS560en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS554en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS561en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS562en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS563en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS564en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS565en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS566en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS567en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS568en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS569en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS570en-GB.xml",
        "http://ratings.food.gov.uk/OpenDataFiles/FHRS571en-GB.xml"
        ]

    for idx, url in enumerate(urls):
        print(str.format("File {0} of {1}", idx, len(urls)))

        target_filename = str.format("{0}.xml", idx)

        if not os.path.exists(target_filename):
            urllib.request.urlretrieve(url, target_filename)


def convert_xml_to_json():
    op = open("data.json", "w")

    file_names = [f for f in os.listdir() if re.match("\d+\.xml", f) is not None]

    for file_name in file_names:
        print(file_name)

        f = open(file_name, "r")
        xml = f.read()
        d = xmltodict.parse(xml)

        establishment_collection = d["FHRSEstablishment"]["EstablishmentCollection"]

        if establishment_collection is not None:
            for establishment in establishment_collection["EstablishmentDetail"]:
                j = json.dumps(establishment)
                op.write(j)
                op.write("\n")

        f.close()

        os.remove(file_name)

    op.close()


if __name__ == "__main__":
    main()
